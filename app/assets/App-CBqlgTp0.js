import{c,R as g,j as e,l as v,u as d,g as y,A as k,P as m,S as j,H as M,T as N,_ as p,N as i,b,F as w,e as _,f as T,O as S}from"./index-C1_1EwQU.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]],$=c("at-sign",z);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"m17 7 5 5-5 5",key:"1xlxn0"}],["path",{d:"m7 7-5 5 5 5",key:"19njba"}],["path",{d:"M8 12h.01",key:"czm47f"}]],C=c("chevrons-left-right-ellipsis",L);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],I=c("cloud-upload",H);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],O=c("gauge",F);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],A=c("layout-template",P);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M15 12h6",key:"upa0zy"}],["path",{d:"M15 6h6",key:"1jlkvy"}],["path",{d:"m3 13 3.553-7.724a.5.5 0 0 1 .894 0L11 13",key:"blevx4"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3.92 11h6.16",key:"1bqo8m"}]],E=c("letter-text",q);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],R=c("list",U);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M7 11h10",key:"1twpyw"}],["path",{d:"M7 15h6",key:"d9of3u"}],["path",{d:"M7 7h8",key:"af5zfr"}]],B=c("message-square-text",D);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],G=c("mouse-pointer-click",V);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],Z=c("newspaper",J);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M15 2v20",key:"dcj49h"}],["path",{d:"M15 7h5",key:"1xj5lc"}],["path",{d:"M15 12h5",key:"w5shd9"}],["path",{d:"M15 17h5",key:"1qaofu"}]],K=c("notebook-tabs",W);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]],X=c("paintbrush",Q);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M14 8H8",key:"1l3xfs"}],["path",{d:"M16 12H8",key:"1fr5h0"}],["path",{d:"M13 16H8",key:"wsln4y"}]],ee=c("receipt-text",Y);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],se=c("rocket",te);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M11 17a4 4 0 0 1-8 0V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2Z",key:"1ldrpk"}],["path",{d:"M16.7 13H19a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H7",key:"11i5po"}],["path",{d:"M 7 17h.01",key:"1euzgo"}],["path",{d:"m11 8 2.3-2.3a2.4 2.4 0 0 1 3.404.004L18.6 7.6a2.4 2.4 0 0 1 .026 3.434L9.9 19.8",key:"o2gii7"}]],ne=c("swatch-book",ae);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M12 15V9",key:"8c7uyn"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M3 9h18",key:"1pudct"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],ce=c("table-cells-split",oe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],le=c("user",ie),de=async()=>{await v(),window.localStorage.removeItem("data"),window.history.replaceState(null,"","/app/"),window.location.pathname="/app/"},re=g.forwardRef((t,s)=>{const a=()=>s&&"current"in s&&s.current instanceof HTMLDialogElement&&s.current.close();return e.jsxs("dialog",{ref:s,className:"modal",...t,children:[e.jsxs("div",{className:"modal-box w-xs",children:[e.jsx("h1",{children:"Log out"}),e.jsx("p",{className:"pt-2 pb-6 text-center",children:"If you proceed all locally stored changes will be lost. Make sure everything is synced with the cloud."}),e.jsxs("div",{className:"flex w-full gap-6",children:[e.jsx("button",{className:"btn btn-sm btn-error grow",onClick:de,children:"Log out"}),e.jsx("button",{className:"btn btn-sm grow",onClick:a,children:"Cancel"})]})]}),e.jsx("form",{method:"dialog",className:"modal-backdrop",children:e.jsx("button",{children:"Close"})})]})}),he=async()=>{const{setPid:t,setStatus:s}=d.getState(),a=y();if(a)try{const n=await a.getIdToken(),l=await fetch(`${k}/deploy/`,{method:"POST",headers:new Headers({Authorization:`Bearer ${n}`})});if(!l.ok)throw new Error("Publishing failed");const o=await l.text();return typeof o=="string"&&o.length===m.LENGTH&&(t(o),s(j.PID_OLD)),o}catch(n){console.error(n)}return""},f=(t,s)=>{if(t===s)return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;const a=Object.keys(t),n=Object.keys(s);if(a.length!==n.length)return!1;for(const l of a)if(!(n.includes(l)&&f(t[l],s[l])))return!1;return!0},pe=async()=>{const{config:t,configBackup:s,setConfig:a,setSid:n}=d.getState();if(f(t,s))return!1;const l=y();if(l)try{const o=await l.getIdToken(),r=JSON.stringify(t),h=await fetch(`${k}/config/`,{method:"POST",headers:new Headers({Authorization:`Bearer ${o}`,"Content-Type":"application/json"}),body:r});if(!h.ok){if(h.status===M.NOTMODIFIED)return a(t),!0;throw new Error("Updating config failed")}const u=await h.text();return n(u),a(t),console.log("Updated",h,u,r),!0}catch(o){console.error(o)}return!1},x=(t,s,a=N.UI_FLASH)=>{const[n,l]=p.useState(!1),o=p.useRef(t);return p.useEffect(()=>{if(s!==void 0?typeof s=="boolean"?s:t===s:t!==o.current){l(!0);const r=setTimeout(()=>l(!1),a);return()=>clearTimeout(r)}o.current=t},[t,s,a]),n},ue=()=>{const t=d(o=>o.pid),s=d(o=>o.sid),a=d(o=>o.status),n=x(s),l=x(a,a===j.PID_NEW&&t!==m.INIT);return e.jsxs("ul",{className:"menu menu-sm gap-2",children:[e.jsx("li",{children:e.jsxs("button",{type:"button",className:"btn btn-xs",children:[e.jsx(G,{}),"Preview"]})}),e.jsx("li",{children:e.jsxs("button",{type:"button",className:`btn btn-xs ${n?"btn-success":""}`,onClick:pe,children:[e.jsx(I,{}),"Upload to cloud"]})}),e.jsx("li",{children:e.jsxs("button",{type:"button",className:`btn btn-xs ${l?"btn-success":""}`,onClick:he,children:[e.jsx(se,{}),"Publish the website"]})})]})},xe=()=>e.jsxs("ul",{className:"menu menu-sm",children:[e.jsx("li",{children:e.jsxs(i,{to:"/app/",className:({isActive:t})=>t?"menu-active":void 0,end:!0,children:[e.jsx(K,{})," Overview"]})}),e.jsx("li",{children:e.jsxs(i,{to:"/app/domain/",className:({isActive:t})=>t?"menu-active":void 0,children:[e.jsx($,{})," Domain Name"]})}),e.jsx("li",{children:e.jsxs(i,{to:"/app/template/",className:({isActive:t})=>t?"menu-active":void 0,end:!0,children:[e.jsx(A,{})," Templates"]})}),e.jsx("li",{children:e.jsxs(i,{to:"/app/layout/",className:({isActive:t})=>t?"menu-active":void 0,end:!0,children:[e.jsx(ce,{})," Header & Footer"]})}),e.jsx("li",{children:e.jsxs(i,{to:"/app/menu/",className:({isActive:t})=>t?"menu-active":void 0,end:!0,children:[e.jsx(R,{})," Menu Items"]})}),e.jsx("li",{children:e.jsxs(i,{to:"/app/edit/",className:({isActive:t})=>t?"menu-active":void 0,end:!0,children:[e.jsx(E,{})," Content"]})}),e.jsx("li",{children:e.jsxs(i,{to:"/app/feed/",className:({isActive:t})=>t?"menu-active":void 0,end:!0,children:[e.jsx(B,{})," Newsfeed"]})}),e.jsx("li",{children:e.jsxs(i,{to:"/app/blog/",className:({isActive:t})=>t?"menu-active":void 0,end:!0,children:[e.jsx(Z,{})," Blog"]})}),e.jsx("li",{children:e.jsxs(i,{to:"/app/colors/",className:({isActive:t})=>t?"menu-active":void 0,end:!0,children:[e.jsx(ne,{})," Colors"]})}),e.jsx("li",{children:e.jsxs(i,{to:"/app/fonts/",className:({isActive:t})=>t?"menu-active":void 0,end:!0,children:[e.jsx(b,{})," Fonts"]})}),e.jsx("li",{children:e.jsxs(i,{to:"/app/style/",className:({isActive:t})=>t?"menu-active":void 0,end:!0,children:[e.jsx(X,{})," Styles"]})}),e.jsx("li",{children:e.jsxs(i,{to:"/app/script/",className:({isActive:t})=>t?"menu-active":void 0,end:!0,children:[e.jsx(C,{})," JavaScript"]})}),e.jsx("li",{children:e.jsxs(i,{to:"/app/files/",className:({isActive:t})=>t?"menu-active":void 0,end:!0,children:[e.jsx(w,{})," Files & Images"]})}),e.jsx("li",{children:e.jsxs(i,{to:"/app/seo/",className:({isActive:t})=>t?"menu-active":void 0,end:!0,children:[e.jsx(O,{})," Optimization"]})})]});function ye(){const t=d(n=>n.user),s=p.useRef(null),a=()=>s?.current?.showModal();return t?e.jsxs("header",{children:[e.jsxs("nav",{children:[e.jsx("h1",{children:"OFFgap"}),e.jsx(xe,{})]}),e.jsx("nav",{children:e.jsx(ue,{})}),e.jsx("nav",{children:e.jsxs("ul",{className:"menu menu-sm",children:[e.jsx("li",{children:e.jsxs(i,{to:"/app/plan/",className:({isActive:n})=>n?"menu-active":void 0,end:!0,children:[e.jsx(ee,{})," Plan & Billing"]})}),e.jsx("li",{onClick:a,children:e.jsxs(i,{to:"/app/account/",className:({isActive:n})=>n?"menu-active":void 0,end:!0,children:[e.jsx(le,{})," Account Settings"]})})]})}),e.jsx(re,{ref:s})]}):e.jsx("h1",{children:e.jsx("a",{href:"/",children:"OFFgap"})})}function me(){const s=!!_().location;return e.jsxs(e.Fragment,{children:[e.jsx(ye,{}),s&&e.jsx(T,{}),e.jsx(S,{})]})}export{me as App};
