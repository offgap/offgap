import{c as l,R as g,j as e,l as v,u as r,g as y,A as m,P as j,S as k,H as N,T as M,_ as p,N as c,b as w,e as b,F as _,f as T,h as S,i as z,O as $}from"./index-BL118Kam.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]],F=l("at-sign",I);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"m17 7 5 5-5 5",key:"1xlxn0"}],["path",{d:"m7 7-5 5 5 5",key:"19njba"}],["path",{d:"M8 12h.01",key:"czm47f"}]],O=l("chevrons-left-right-ellipsis",L);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],C=l("cloud-upload",P);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],A=l("gauge",q);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],E=l("layout-template",H);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M15 12h6",key:"upa0zy"}],["path",{d:"M15 6h6",key:"1jlkvy"}],["path",{d:"m3 13 3.553-7.724a.5.5 0 0 1 .894 0L11 13",key:"blevx4"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3.92 11h6.16",key:"1bqo8m"}]],R=l("letter-text",U);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],B=l("list",D);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M7 11h10",key:"1twpyw"}],["path",{d:"M7 15h6",key:"d9of3u"}],["path",{d:"M7 7h8",key:"af5zfr"}]],G=l("message-square-text",V);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],W=l("newspaper",J);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M15 2v20",key:"dcj49h"}],["path",{d:"M15 7h5",key:"1xj5lc"}],["path",{d:"M15 12h5",key:"w5shd9"}],["path",{d:"M15 17h5",key:"1qaofu"}]],Q=l("notebook-tabs",K);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Y=l("rocket",X);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M12.034 12.681a.498.498 0 0 1 .647-.647l9 3.5a.5.5 0 0 1-.033.943l-3.444 1.068a1 1 0 0 0-.66.66l-1.067 3.443a.5.5 0 0 1-.943.033z",key:"xwnzip"}],["path",{d:"M21 11V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6",key:"14rsvq"}]],ee=l("square-mouse-pointer",Z);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M12 15V9",key:"8c7uyn"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M3 9h18",key:"1pudct"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],se=l("table-cells-split",te);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ne=l("user",ae),oe=async()=>{await v(),window.localStorage.removeItem("data"),window.history.replaceState(null,"","/app/"),window.location.pathname="/app/"},ce=g.forwardRef((t,s)=>{const n=()=>s&&"current"in s&&s.current instanceof HTMLDialogElement&&s.current.close();return e.jsxs("dialog",{ref:s,className:"modal",...t,children:[e.jsxs("div",{className:"modal-box w-xs",children:[e.jsx("h1",{children:"Log out"}),e.jsx("p",{className:"pt-2 pb-6 text-center",children:"If you proceed all locally stored changes will be lost. Make sure everything is synced with the cloud."}),e.jsxs("div",{className:"flex w-full gap-6",children:[e.jsx("button",{className:"btn btn-sm btn-error grow",onClick:oe,children:"Log out"}),e.jsx("button",{className:"btn btn-sm grow",onClick:n,children:"Cancel"})]})]}),e.jsx("form",{method:"dialog",className:"modal-backdrop",children:e.jsx("button",{children:"Close"})})]})}),ie=async()=>{const{setPid:t,setStatus:s}=r.getState(),n=y();if(n)try{const o=await n.getIdToken(),i=await fetch(`${m}/deploy/`,{method:"POST",headers:new Headers({Authorization:`Bearer ${o}`})});if(!i.ok)throw new Error("Publishing failed");const a=await i.text();return typeof a=="string"&&a.length===j.LENGTH&&(t(a),s(k.PID_OLD)),a}catch(o){console.error(o)}return""},f=(t,s)=>{if(t===s)return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;const n=Object.keys(t),o=Object.keys(s);if(n.length!==o.length)return!1;for(const i of n)if(!(o.includes(i)&&f(t[i],s[i])))return!1;return!0},le=async()=>{const{config:t,configBackup:s,setConfig:n,setSid:o}=r.getState();if(f(t,s))return!1;const i=y();if(i)try{const a=await i.getIdToken(),d=JSON.stringify(t),h=await fetch(`${m}/config/`,{method:"POST",headers:new Headers({Authorization:`Bearer ${a}`,"Content-Type":"application/json"}),body:d});if(!h.ok){if(h.status===N.NOTMODIFIED)return n(t),!0;throw new Error("Updating config failed")}const u=await h.text();return o(u),n(t),console.log("Updated",h,u,d),!0}catch(a){console.error(a)}return!1},x=(t,s,n=M.UI_FLASH)=>{const[o,i]=p.useState(!1),a=p.useRef(t);return p.useEffect(()=>{if(s!==void 0?typeof s=="boolean"?s:t===s:t!==a.current){i(!0);const d=setTimeout(()=>i(!1),n);return()=>clearTimeout(d)}a.current=t},[t,s,n]),o},re=()=>{const t=r(a=>a.pid),s=r(a=>a.sid),n=r(a=>a.status),o=x(s),i=x(n,n===k.PID_NEW&&t!==j.INIT);return e.jsxs("ul",{className:"menu menu-sm gap-2",children:[e.jsx("li",{children:e.jsxs(c,{to:"/app/preview/",end:!0,className:({isActive:a})=>`btn btn-xs ${a?"btn-neutral shadow-none":""}`,children:[e.jsx(ee,{})," Preview"]})}),e.jsx("li",{children:e.jsxs("button",{type:"button",className:`btn btn-xs ${o?"btn-success":""}`,onClick:le,children:[e.jsx(C,{}),"Upload to cloud"]})}),e.jsx("li",{children:e.jsxs("button",{type:"button",className:`btn btn-xs ${i?"btn-success":""}`,onClick:ie,children:[e.jsx(Y,{}),"Publish the website"]})})]})},de=()=>e.jsxs("ul",{className:"menu menu-sm",children:[e.jsx("li",{children:e.jsxs(c,{to:"/app/",className:({isActive:t})=>t?"menu-active":void 0,end:!0,children:[e.jsx(Q,{})," Overview"]})}),e.jsx("li",{children:e.jsxs(c,{to:"/app/domain/",className:({isActive:t})=>t?"menu-active":void 0,children:[e.jsx(F,{})," Domain Name"]})}),e.jsx("li",{children:e.jsxs(c,{to:"/app/templates/",className:({isActive:t})=>t?"menu-active":void 0,end:!0,children:[e.jsx(E,{})," Templates"]})}),e.jsx("li",{children:e.jsxs(c,{to:"/app/layout/",className:({isActive:t})=>t?"menu-active":void 0,end:!0,children:[e.jsx(se,{})," Header & Footer"]})}),e.jsx("li",{children:e.jsxs(c,{to:"/app/menu/",className:({isActive:t})=>t?"menu-active":void 0,end:!0,children:[e.jsx(B,{})," Menu Items"]})}),e.jsx("li",{children:e.jsxs(c,{to:"/app/edit/",className:({isActive:t})=>t?"menu-active":void 0,end:!0,children:[e.jsx(R,{})," Content"]})}),e.jsx("li",{children:e.jsxs(c,{to:"/app/feed/",className:({isActive:t})=>t?"menu-active":void 0,end:!0,children:[e.jsx(G,{})," Newsfeed"]})}),e.jsx("li",{children:e.jsxs(c,{to:"/app/blog/",className:({isActive:t})=>t?"menu-active":void 0,end:!0,children:[e.jsx(W,{})," Blog"]})}),e.jsx("li",{children:e.jsxs(c,{to:"/app/fonts/",className:({isActive:t})=>t?"menu-active":void 0,children:[e.jsx(w,{})," Fonts"]})}),e.jsx("li",{children:e.jsxs(c,{to:"/app/styles/",className:({isActive:t})=>t?"menu-active":void 0,children:[e.jsx(b,{})," Styles & Colors"]})}),e.jsx("li",{children:e.jsxs(c,{to:"/app/script/",className:({isActive:t})=>t?"menu-active":void 0,end:!0,children:[e.jsx(O,{})," JavaScript"]})}),e.jsx("li",{children:e.jsxs(c,{to:"/app/files/",className:({isActive:t})=>t?"menu-active":void 0,end:!0,children:[e.jsx(_,{})," Files & Images"]})}),e.jsx("li",{children:e.jsxs(c,{to:"/app/seo/",className:({isActive:t})=>t?"menu-active":void 0,end:!0,children:[e.jsx(A,{})," Optimization"]})})]});function he(){const t=r(o=>o.user),s=p.useRef(null),n=()=>s?.current?.showModal();return t?e.jsxs("header",{children:[e.jsxs("nav",{children:[e.jsx("h1",{children:"OFFgap"}),e.jsx(de,{})]}),e.jsx("nav",{children:e.jsx(re,{})}),e.jsx("nav",{children:e.jsxs("ul",{className:"menu menu-sm",children:[e.jsx("li",{children:e.jsxs(c,{to:"/app/plan/",className:({isActive:o})=>o?"menu-active":void 0,children:[e.jsx(T,{})," Plans & Billing"]})}),e.jsx("li",{onClick:n,children:e.jsxs(c,{to:"/app/account/",className:({isActive:o})=>o?"menu-active":void 0,children:[e.jsx(ne,{})," Account Settings"]})})]})}),e.jsx(ce,{ref:s})]}):e.jsx("h1",{children:e.jsx("a",{href:"/",children:"OFFgap"})})}function ue(){const s=!!S().location;return e.jsxs(e.Fragment,{children:[e.jsx(he,{}),s&&e.jsx(z,{}),e.jsx($,{})]})}export{ue as App};
